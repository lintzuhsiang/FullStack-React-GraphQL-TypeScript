import{stringifyVariables as e,createRequest as r,formatDocument as t,makeOperation as n}from"@urql/core";import{share as i,merge as a,mergeMap as o,fromArray as u,buffer as s,fromPromise as f,skipUntil as l,map as c,filter as p,empty as d,makeSubject as v}from"wonka";import{_ as y}from"./08e6d3e1.min.mjs";import{Kind as m}from"graphql/language/kinds.mjs";import{valueFromASTUntyped as h}from"graphql/utilities/valueFromASTUntyped.mjs";import{print as k}from"graphql/language/printer.mjs";function _(e){return e.name.value}function g(e){return e.typeCondition.name.value}function O(e){return e.alias?e.alias.value:_(e)}function b(e){return e.selectionSet?e.selectionSet.selections:[]}function q(e){return e.typeCondition?_(e.typeCondition):null}function w(e){return e.kind===m.FIELD}function E(e){return e.kind===m.INLINE_FRAGMENT}function N(e,r){var t={},n=0;if(e.arguments&&e.arguments.length)for(var i=0,a=e.arguments.length;i<a;i++){var o=e.arguments[i],u=h(o.value,r);null!=u&&(t[_(o)]=u,n++)}return n>0?t:null}function K(e,r){if(r&&e.variableDefinitions){for(var t={},n=0,i=e.variableDefinitions.length;n<i;n++){var a=_(e.variableDefinitions[n].variable);t[a]=r[a]}return t}}function x(e,r){var t={};if(!r)return t;if(e.variableDefinitions)for(var n=0,i=e.variableDefinitions.length;n<i;n++){var a=e.variableDefinitions[n],o=_(a.variable);t[o]=void 0===r[o]&&a.defaultValue?h(a.defaultValue,r):r[o]}for(var u in r)u in t||(t[u]=r[u]);return t}function T(e,r,t){if(!e){var n=new Error((r||"Minfied Error #"+t+"\n")+"\nhttps://bit.ly/2XbVrpR#"+t);throw n.name="Graphcache Error",n}}function A(e){for(var r=0;r<e.definitions.length;r++)if(e.definitions[r].kind===m.OPERATION_DEFINITION)return e.definitions[r];T(!1,"",1)}function S(e){for(var r={},t=0;t<e.definitions.length;t++){var n=e.definitions[t];n.kind===m.FRAGMENT_DEFINITION&&(r[_(n)]=n)}return r}function L(e,r){var t=e.directives;if(!t)return!0;for(var n=0,i=t.length;n<i;n++){var a=t[n],o=_(a);if(("include"===o||"skip"===o)&&a.arguments&&a.arguments[0]&&"if"===_(a.arguments[0])){var u=h(a.arguments[0].value,r);return"include"===o?!!u:!u}}return!0}new Set;var M=/^__/;function F(e,r,t){var n=D(e,r,t);return!!n&&"NON_NULL"!==n.type.kind}function I(e,r,t){var n=D(e,r,t);if(!n)return!1;var i="NON_NULL"===n.type.kind?n.type.ofType:n.type;return"LIST"===i.kind&&"NON_NULL"!==i.ofType.kind}function C(e,r,t){if(!t)return!1;var n=q(r);return!n||t===n||(e.types[n]&&"OBJECT"===e.types[n].kind?n===t:(function(e,r){T(e.types[r]&&("INTERFACE"===e.types[r].kind||"UNION"===e.types[r].kind),"",5)}(e,n),j(e,t),e.isSubType(n,t)))}function D(e,r,t){if(!M.test(r)&&!M.test(t))return j(e,r),e.types[r].fields[t]}function j(e,r){T(e.types[r]&&"OBJECT"===e.types[r].kind,"",3)}function P(r,t){return t?r+"("+e(t)+")":r}function R(e,r){return e+"."+r}function J(e){var r=e.indexOf("(");return r>-1?{fieldKey:e,fieldName:e.slice(0,r),arguments:JSON.parse(e.slice(r+1,-1))}:{fieldKey:e,fieldName:e,arguments:null}}function Q(e){var r=e.indexOf(".");return{entityKey:e.slice(0,r).replace(/%2e/g,"."),fieldKey:e.slice(r+1)}}function U(){return Object.create(null)}var B=null,G=null,V=null,z=null,X=!1;function H(){return{optimistic:U(),base:new Map}}function W(e,r,t,n){B=e,G=r,V=U(),X=!!n,t?n||r.optimisticOrder.length>0?(n||r.commutativeKeys.has(t)?n&&r.commutativeKeys.delete(t):pe(r,t),z=t,function(e,r){-1===e.optimisticOrder.indexOf(r)&&e.optimisticOrder.unshift(r),e.refLock[r]||(e.refLock[r]=U(),e.links.optimistic[r]=new Map,e.records.optimistic[r]=new Map)}(r,t)):(z=null,ve(r,t)):z=null}function Y(){var r=G,t=z;if(X=!1,z=null,t&&r.optimisticOrder.indexOf(t)>-1)for(var n=r.optimisticOrder.length;--n>=0&&r.refLock[r.optimisticOrder[n]]&&r.commutativeKeys.has(r.optimisticOrder[n]);)ye(r.optimisticOrder[n]);B=null,G=null,V=null,r.defer||(r.defer=!0,Promise.resolve().then((function(){W("read",r,null),G.gc.forEach((function(e,r,t){if((G.refCount[e]||0)>0)t.delete(e);else{for(var n in G.refLock){var i=G.refLock[n];if((i[e]||0)>0)return;delete i[e]}delete G.refCount[e],t.delete(e),G.records.base.delete(e);var a=G.links.base.get(e);if(a)for(var o in G.links.base.delete(e),a)ne(t,G.refCount,a[o],-1)}})),function(){if(G.storage){X=!0,B="read";var r=U();G.persist.forEach((function(t){var n,i=Q(t),a=i.entityKey,o=i.fieldKey;r[t]=void 0!==(n=fe(a,o))?":"+e(n):void 0!==(n=se(a,o))?e(n):void 0})),X=!1,G.storage.writeData(r),G.persist.clear()}}(),Y(),r.defer=!1})))}function Z(e,r,t){W("read",e,r,t),Y()}function $(){return T(null!==V,"",2),V}function ee(e,r,t,n){var i=z?e.optimistic[z]:e.base,a=i.get(r);void 0===a&&i.set(r,a=U()),void 0!==n||z?a[t]=n:delete a[t]}function re(e,r,t){for(var n,i=!X&&"read"===B&&z&&G.commutativeKeys.has(z),a=0,o=G.optimisticOrder.length;a<o;a++){var u=G.optimisticOrder[a],s=e.optimistic[u];if(i=i&&u!==z,s&&(!i||!G.commutativeKeys.has(u))&&(!X||"write"===B||G.commutativeKeys.has(u))&&void 0!==(n=s.get(r))&&t in n)return n[t]}return void 0!==(n=e.base.get(r))?n[t]:void 0}function te(e,r,t,n){var i=void 0!==r[t]?r[t]:0,a=r[t]=i+n|0;void 0!==e&&(a<=0?e.add(t):i<=0&&a>0&&e.delete(t))}function ne(e,r,t,n){if("string"==typeof t)te(e,r,t,n);else if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)Array.isArray(t[i])?ne(e,r,t[i],n):t[i]&&te(e,r,t[i],n)}function ie(e,r,t){if(void 0!==t)for(var n in t)r.has(n)||(e.push(J(n)),r.add(n))}function ae(e,r,t,n){ie(e,r,n.base.get(t));for(var i=0,a=G.optimisticOrder.length;i<a;i++){var o=n.optimistic[G.optimisticOrder[i]];void 0!==o&&ie(e,r,o.get(t))}}function oe(e,r){"__typename"!==r&&(e!==G.queryRootKey?V[e]=!0:void 0!==r&&(V[R(e,r)]=!0))}function ue(e,r){!X&&G.storage&&G.persist.add(function(e,r){return e.replace(/\./g,"%2e")+"."+r}(e,r))}function se(e,r){return oe(e,r),re(G.records,e,r)}function fe(e,r){return oe(e,r),re(G.links,e,r)}function le(e,r,t){oe(e,r),ue(e,r),ee(G.records,e,r,t)}function ce(e,r,t){var n,i,a,o=G;z?(n=o.refLock[z]||(o.refLock[z]=U()),i=o.links.optimistic[z]):(n=o.refCount,i=o.links.base,a=o.gc);var u=i&&i.get(e),s=u&&u[r];oe(e,r),ue(e,r),ee(o.links,e,r,t),ne(a,n,s,-1),ne(a,n,t,1)}function pe(e,r){var t=e.optimisticOrder.indexOf(r);-1===t?e.optimisticOrder.unshift(r):e.commutativeKeys.has(r)||(de(e,r),e.optimisticOrder.splice(t,1),e.optimisticOrder.unshift(r)),e.commutativeKeys.add(r)}function de(e,r){e.refLock[r]&&(delete e.refLock[r],delete e.records.optimistic[r],delete e.links.optimistic[r])}function ve(e,r){var t=e.optimisticOrder.indexOf(r);t>-1&&(e.optimisticOrder.splice(t,1),e.commutativeKeys.delete(r)),de(e,r)}function ye(e){var r=V;V=U();var t=G.links.optimistic[e];t&&t.forEach((function(e,r){for(var t in e)ce(r,t,e[t])}));var n=G.records.optimistic[e];n&&n.forEach((function(e,r){for(var t in e)le(r,t,e[t])})),V=r,ve(G,e)}function me(e){var r=G.links,t=G.records,n=[],i=new Set;return oe(e),ae(n,i,e,r),ae(n,i,e,t),n}var he={current:null};function ke(e){return e.__internal.path.length>0&&e.__internal.errorMap?e.__internal.errorMap[e.__internal.path.join(".")]:void 0}function _e(e,r,t,n,i,a,o){var u={store:e,variables:r,fragments:t,parent:{__typename:n},parentTypeName:n,parentKey:i,parentFieldKey:"",fieldName:"",error:void 0,partial:!1,optimistic:!!a,__internal:{path:[],errorMap:void 0}};if(o&&o.graphQLErrors)for(var s=0;s<o.graphQLErrors.length;s++){var f=o.graphQLErrors[s];f.path&&f.path.length&&(u.__internal.errorMap||(u.__internal.errorMap=Object.create(null)),u.__internal.errorMap[f.path.join(".")]=f)}return u}function ge(e,r,t,n,i,a){he.current=e,e.parent=r,e.parentTypeName=t,e.parentKey=n,e.parentFieldKey=i,e.fieldName=a,e.error=ke(e)}function Oe(e,r,t,n){if(!r)return!1;var i=q(e);return!i||r===i||!b(e).some((function(e){if(!w(e))return!1;var r=P(_(e),N(e,n));return!function(e,r){return void 0!==se(e,r)||void 0!==fe(e,r)}(t,r)}))}function be(e,r,t,n){var i,a=0;return function(){if(void 0!==i){var o=i();if(void 0!==o)return o;i=void 0}for(;a<t.length;){var u=t[a++];if(L(u,n.variables)){if(w(u))return u;var s=E(u)?u:n.fragments[_(u)];if(void 0!==s&&(n.store.schema?C(n.store.schema,s,e):Oe(s,e,r,n.variables)))return(i=be(e,r,b(s),n))()}}}}function qe(e){return void 0===e?null:e}function we(e,r){if(null==r)return r;if(Array.isArray(r)){for(var t=new Array(r.length),n=0,i=t.length;n<i;n++)t[n]=we(e,r[n]);return t}return e.keyOfEntity(r)}function Ee(e,r,t,n,i){W("write",e.data,i||null);var a=Ne(e,r,t,n);return Y(),a}function Ne(e,r,t,n,i){var a=A(r.query),o={data:t,dependencies:$()},u=e.rootFields[a.operation];return Ke(_e(e,x(a,r.variables),S(r.query),u,u,!!i,n),u,b(a),t),o}function Ke(e,r,t,n){var i=r===e.store.rootFields.query,a=!i&&!!e.store.rootNames[r],o=a||i?r:n.__typename;if(o){a||i||!r||le(r,"__typename",o);for(var u,s=be(o,r||o,t,e);u=s();){var f=_(u),l=N(u,e.variables),c=P(f,l),p=O(u),d=n[p];if("__typename"!==f){if(e.__internal.path.push(p),e.optimistic&&a){var v=e.store.optimisticMutations[f];if(!v)continue;ge(e,n,o,o,c,f),d=n[p]=qe(v(l||{},e.store,e))}if(u.selectionSet)if(r&&!a){var y=R(r,c);ce(r||o,c,xe(e,b(u),qe(d),y))}else xe(e,b(u),qe(d));else r&&!a&&le(r||o,c,null===d&&ke(e)?void 0:d);if(a){var m=e.store.updates[o][f];m&&(ge(e,n,o,o,R(o,c),f),n[f]=d,m(n,l||{},e.store,e))}e.__internal.path.pop()}}}}function xe(e,r,t,n){if(Array.isArray(t)){for(var i=new Array(t.length),a=0,o=t.length;a<o;a++){e.__internal.path.push(a);var u=n?R(n,""+a):void 0,s=xe(e,r,t[a],u);i[a]=s,e.__internal.path.pop()}return i}if(null===t)return ke(e)?void 0:null;var f=e.store.keyOfEntity(t)||n;return Ke(e,f,r,t),f||null}function Te(e){var r,t;this.keyOfField=P,this.resolveFieldByKey=this.resolve,e||(e={}),this.resolvers=e.resolvers||{},this.optimisticMutations=e.optimistic||{},this.keys=e.keys||{};var n,i="Query",a="Mutation",o="Subscription";if(e.schema){var u=function(e){var r=e.__schema,t={};function n(e){for(var r={},t=0;t<e.length;t++)r[e[t].name]=e[t];return r}function i(e){switch(e.kind){case"OBJECT":case"INTERFACE":return{name:e.name,kind:e.kind,interfaces:n(e.interfaces||[]),fields:n(e.fields.map((function(e){return{name:e.name,type:e.type,args:n(e.args)}})))};case"UNION":return{name:e.name,kind:e.kind,types:n(e.possibleTypes||[])}}}var a={query:r.queryType?r.queryType.name:null,mutation:r.mutationType?r.mutationType.name:null,subscription:r.subscriptionType?r.subscriptionType.name:null,types:void 0,isSubType:function(e,r){var n=t[e],i=t[r];return!!(n&&i&&("UNION"===n.kind?n.types[r]:"OBJECT"!==n.kind&&"OBJECT"===i.kind?i.interfaces[e]:e===r))}};if(r.types){a.types=t;for(var o=0;o<r.types.length;o++){var u=r.types[o];if(u&&u.name){var s=i(u);s&&(t[u.name]=s)}}}return a}(e.schema);i=u.query||i,a=u.mutation||a,o=u.subscription||o,u.types&&(this.schema=u)}this.updates=((r={})[a]=e.updates&&e.updates.Mutation||{},r[o]=e.updates&&e.updates.Subscription||{},r),this.rootFields={query:i,mutation:a,subscription:o},this.rootNames=((t={})[i]="query",t[a]="mutation",t[o]="subscription",t),this.data=(n=i,{defer:!1,gc:new Set,persist:new Set,queryRootKey:n,refCount:U(),refLock:U(),links:H(),records:H(),commutativeKeys:new Set,optimisticOrder:[],storage:null})}function Ae(e,r,t,n,i){W("read",e.data,t&&i||null);var a=Se(e,r,t,n);return Y(),a}function Se(e,r,t,n){var i=A(r.query),a=e.rootFields[i.operation],o=b(i),u=_e(e,x(i,r.variables),S(r.query),a,a,!1,n),s=a!==u.store.rootFields.query?Le(u,a,o,t||{}):Fe(u,a,o,{});return{dependencies:$(),partial:u.partial||!s,data:s||null}}function Le(e,r,t,n){var i=e.store.rootNames[r]?r:n.__typename;if("string"!=typeof i)return n;for(var a,o=be(r,r,t,e),u={__typename:i};a=o();){var s=O(a),f=n[s];if(e.__internal.path.push(s),a.selectionSet&&null!==f){var l=qe(f);u[s]=Me(e,b(a),l)}else u[s]=f;e.__internal.path.pop()}return u}function Me(e,r,t){if(Array.isArray(t)){for(var n=new Array(t.length),i=0,a=t.length;i<a;i++)e.__internal.path.push(i),n[i]=Me(e,r,t[i]),e.__internal.path.pop();return n}if(null===t)return null;var o=e.store.keyOfEntity(t);if(null!==o){var u=Fe(e,o,r,{});return void 0===u?null:u}return Le(e,t.__typename,r,t)}function Fe(e,r,t,n,i){var a=e.store,o=r===a.rootFields.query,u=i&&a.keyOfEntity(i)||r,s=o?r:se(u,"__typename")||i&&i.__typename;if("string"==typeof s&&(!i||s===i.__typename)){for(var f,l=be(s,u,t,e),c=!1,p=!1;void 0!==(f=l());){var d=_(f),v=N(f,e.variables),y=O(f),m=P(d,v),h=R(u,m),k=se(u,m),g=i?i[d]:void 0,q=a.resolvers[s];if("__typename"!==d){var w=void 0;if(e.__internal.path.push(y),void 0!==g&&void 0===f.selectionSet)w=g;else if("read"===(T(null!==B,"",2),B)&&q&&"function"==typeof q[d]){if(ge(e,n,s,u,h,d),void 0!==k&&(n[y]=k),w=q[d](n,v||{},a,e),f.selectionSet&&(w=Ie(e,s,d,h,b(f),n[y],w)),a.schema&&null===w&&!F(a.schema,s,d))return}else if(f.selectionSet)if(void 0!==g)w=Ie(e,s,d,h,b(f),n[y],g);else{var E=fe(u,m);void 0!==E?w=Ce(e,E,s,d,b(f),n[y]):"object"==typeof k&&null!==k&&(w=k)}else w=k;if(void 0===w&&ke(e)&&(p=!0,w=null),e.__internal.path.pop(),void 0===w&&a.schema&&F(a.schema,s,d))p=!0,n[y]=null;else{if(void 0===w)return;c=!0,n[y]=w}}else n[y]=s}return p&&(e.partial=!0),o&&p&&!c?void 0:n}}function Ie(e,r,t,n,i,a,o){if(Array.isArray(o)){for(var u=e.store,s=!!u.schema&&I(u.schema,r,t),f=new Array(o.length),l=0,c=o.length;l<c;l++){e.__internal.path.push(l);var p=Ie(e,r,t,R(n,""+l),i,null!=a?a[l]:void 0,o[l]);if(e.__internal.path.pop(),void 0===p&&!s)return;f[l]=void 0!==p?p:null}return f}if(null==o)return o;if(null===a)return null;if("string"==typeof(v=o)||"object"==typeof v&&"string"==typeof v.__typename){var d=a||{};return"string"==typeof o?Fe(e,o,i,d):Fe(e,n,i,d,o)}var v}function Ce(e,r,t,n,i,a){if(Array.isArray(r)){for(var o=e.store,u=!!o.schema&&I(o.schema,t,n),s=new Array(r.length),f=0,l=r.length;f<l;f++){e.__internal.path.push(f);var c=Ce(e,r[f],t,n,i,null!=a?a[f]:void 0);if(e.__internal.path.pop(),void 0===c&&!u)return;s[f]=void 0!==c?c:null}return s}return null===r||null===a?null:Fe(e,r,i,a||{})}function De(e,r){return n(e.kind,e,y({},e.context,{meta:y({},e.context.meta,{cacheOutcome:r})}))}function je(e,r){return n(e.kind,e,y({},e.context,{requestPolicy:r}))}function Pe(e){return function(r){var v,y=r.forward,m=r.client,h=new Te(e);e&&e.storage&&(v=e.storage.readData().then((function(r){!function(e,r,t){for(var n in W("write",e,null),t){var i=t[n];if(void 0!==i){var a=Q(n),o=a.entityKey,u=a.fieldKey;":"===i[0]?ce(o,u,JSON.parse(i.slice(1))):le(o,u,JSON.parse(i))}}Y(),e.storage=r}(h.data,e.storage,r)})));var k=new Map,_=[],g=new Map,O=U(),b=new Set,q=U();function w(e){for(var r in e)if(O[r])return!0;return!1}function E(e,r){if(r)for(var t in r){var n=q[t];if(n){q[t]=[];for(var i=0,a=n.length;i<a;i++)e.add(n[i])}}}function N(e,r){r.forEach((function(r){if(r!==e.key){var t=g.get(r);if(t){g.delete(r);var n="cache-first";b.has(r)&&(b.delete(r),n="cache-and-network"),m.reexecuteOperation(je(t,n))}}}))}function x(e){if("query"===e.kind)pe(h.data,e.key);else if("teardown"===e.kind)g.delete(e.key),Z(h.data,e.key);else if("mutation"===e.kind&&"network-only"!==e.context.requestPolicy){var r=function(e,r,t){W("write",e.data,t,!0);var n=Ne(e,r,{},void 0,!0);return Y(),n}(h,e,e.key).dependencies;if(!function(e){for(var r in e)return!1;return!0}(r)){for(var i in r)O[i]=!0;k.set(e.key,r);var a=new Set;E(a,r),N(e,a)}}return n(e.kind,{key:e.key,query:t(e.query),variables:e.variables?K(A(e.query),e.variables):e.variables},e.context)}function T(e,r){for(var t in r)(q[t]||(q[t]=[])).push(e.key),g.set(e.key,e)}function S(e){var r=Ae(h,e),t=r.data?r.partial?"partial":"hit":"miss";return T(e,r.dependencies),{outcome:t,operation:e,data:r.data,dependencies:r.dependencies}}function L(e,r){var t,n=e.operation,i=e.error,a=e.extensions,o=n.key;if("mutation"===n.kind?(E(r,k.get(o)),k.delete(o)):pe(h.data,n.key),e.data){E(r,Ee(h,n,e.data,e.error,o).dependencies);var u=Ae(h,n,e.data,e.error,o);e.data=u.data,"query"===n.kind&&E(r,t=u.dependencies)}else Z(h.data,n.key);return t&&T(e.operation,t),{data:e.data,error:i,extensions:a,operation:n}}return function(e){var r=i(e),t=v?i(a([o(u)(s(f(v))(r)),l(f(v))(r)])):r,n=i(c(S)(p((function(e){return"query"===e.kind&&"network-only"!==e.context.requestPolicy}))(t))),g=p((function(e){return"query"!==e.kind||"network-only"===e.context.requestPolicy}))(t),q=c((function(e){return De(e.operation,"miss")}))(p((function(e){return"miss"===e.outcome&&"cache-only"!==e.operation.context.requestPolicy&&!w(e.dependencies)}))(n)),E=c((function(e){var r=e.operation,t=e.outcome,n=e.dependencies,i={operation:De(r,t),data:e.data,error:e.error,extensions:e.extensions};return("cache-and-network"===r.context.requestPolicy||"cache-first"===r.context.requestPolicy&&"partial"===t)&&(i.stale=!0,w(n)?"cache-and-network"===r.context.requestPolicy&&b.add(r.key):m.reexecuteOperation(je(r,"network-only"))),i}))(p((function(e){return"miss"!==e.outcome||"cache-only"===e.operation.context.requestPolicy}))(n)),K=i(y(c(x)(a([g,q])))),T=c((function(e){var r=new Set,t=L(e,r);return N(e.operation,r),t}))(p((function(e){return!k.has(e.operation.key)}))(K)),A=o((function(e){if(_.push(e)<k.size)return d;for(var r=0;r<_.length;r++)pe(h.data,_[r].operation.key);for(var t in O)delete O[t];for(var n,i=[],a=new Set;n=_.shift();)i.push(L(n,a));return N(e.operation,a),u(i)}))(p((function(e){return k.has(e.operation.key)}))(K));return a([T,A,E])}}}function Re(e){return e&&e.networkError&&!e.response&&("undefined"!=typeof navigator&&!1===navigator.onLine||/request failed|failed to fetch|network\s?error/i.test(e.networkError.message))}function Je(e){return function(t){var o=e.storage;if(o&&o.onOnline&&o.readMetadata&&o.writeMetadata){var u=t.forward,s=t.client,f=t.dispatchDebug,l=v(),c=l.source,d=l.next,y=e.optimistic||{},m=[],h=function(){for(var e=[],r=0;r<m.length;r++){var t=m[r];"mutation"===t.kind&&e.push({query:k(t.query),variables:t.variables})}o.writeMetadata(e)},g=!1,O=function(){if(!g){g=!0;for(var e=0;e<m.length;e++){var r=m[e];"mutation"===r.kind&&d(n("teardown",r))}for(var t=0;t<m.length;t++)s.reexecuteOperation(m[t]);m.length=0,g=!1,h()}};o.onOnline(O),o.readMetadata().then((function(e){if(e){for(var t=0;t<e.length;t++)m.push(s.createRequestOperation("mutation",r(e[t].query,e[t].variables)));O()}}));var q=Pe(e)({client:s,dispatchDebug:f,forward:function(e){return p((function(e){return"mutation"!==e.operation.kind||!Re(e.error)||!function(e,r){for(var t,n=r.variables||U(),i=S(r.query),a=[].concat(b(A(r.query)));t=a.pop();)if(L(t,n))if(w(t)){if(e[_(t)])return!0}else{var o=E(t)?t:i[_(t)];o&&a.push.apply(a,b(o))}return!1}(y,e.operation)||(m.push(e.operation),h(),!1)}))(u(e))}});return function(e){var r=i(e),t=a([c,r]);return p((function(e){return"query"!==e.operation.kind||!Re(e.error)||(d(je(e.operation,"cache-only")),m.push(e.operation),!1)}))(q(t))}}return Pe(e)(t)}}Te.prototype.keyOfEntity=function(e){return he.current&&e===he.current.parent?he.current.parentKey:null==e||"string"==typeof e?e||null:e.__typename?this.rootNames[e.__typename]?e.__typename:(this.keys[e.__typename]?r=this.keys[e.__typename](e):null!=e.id?r=""+e.id:null!=e._id&&(r=""+e._id),r?e.__typename+":"+r:null):null;var r},Te.prototype.resolve=function(e,r,t){var n=P(r,t),i=this.keyOfEntity(e);if(!i)return null;var a=se(i,n);return void 0!==a?a:fe(i,n)||null},Te.prototype.invalidate=function(e,r,t){var n=this.keyOfEntity(e);T(n,"",19),function(e,r,t){for(var n=r?[{fieldKey:P(r,t)}]:me(e),i=0,a=n.length;i<a;i++){var o=n[i].fieldKey;void 0!==fe(e,o)?ce(e,o,void 0):le(e,o,void 0)}}(n,r,t)},Te.prototype.inspectFields=function(e){var r=this.keyOfEntity(e);return r?me(r):[]},Te.prototype.updateQuery=function(e,n){var i=r(e.query,e.variables);i.query=t(i.query);var a=n(this.readQuery(i));null!==a&&Ne(this,i,a)},Te.prototype.readQuery=function(e){var n=r(e.query,e.variables);return n.query=t(n.query),Se(this,n).data},Te.prototype.readFragment=function(e,r,n){return function(e,r,t,n){var i=S(r),a=i[Object.keys(i)[0]];if(!a)return null;var o=g(a);"string"==typeof t||t.__typename||(t.__typename=o);var u=e.keyOfEntity(t);return u&&Fe(_e(e,n||{},i,o,u),u,b(a),{})||null}(this,t(e),r,n)},Te.prototype.writeFragment=function(e,r,n){!function(e,r,t,n){var i=S(r),a=i[Object.keys(i)[0]];if(a){var o=g(a),u=y({},{__typename:o},t),s=e.keyOfEntity(u);s&&Ke(_e(e,n||{},i,o,s,void 0),s,b(a),u)}}(this,t(e),r,n)},Te.prototype.link=function(e,r,t,n){var i=void 0!==n?t:null,a=void 0!==n?n:t,o=we(this,e);"string"==typeof o&&ce(o,P(r,i),we(this,a))};export{Te as Store,Pe as cacheExchange,Je as offlineExchange,Ae as query,Ee as write};
//# sourceMappingURL=urql-exchange-graphcache.min.mjs.map
