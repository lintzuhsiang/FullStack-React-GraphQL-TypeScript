import{useReducer as e,useMemo as n,useCallback as t,createElement as r}from"react";import i from"react-ssr-prepass";import{createClient as o,ssrExchange as u,dedupExchange as a,cacheExchange as l,fetchExchange as s,Provider as p}from"urql";function c(){return(c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var f,v=null;function d(){v=null}function h(e,n){var t="undefined"==typeof window;return!t&&v||((v=o(c({},e,{suspense:n&&(t||e.suspense)}))).toJSON=function(){return null}),v}function g(o,v){return v||(v={}),function(g){var m=Boolean((g.getInitialProps||v.ssr)&&!v.neverSuspend),P=function(i){var v=i.pageProps,P=i.urqlClient,q=i.urqlState,C=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===n.indexOf(r)&&(t[r]=e[r]);return t}(i,["pageProps","urqlClient","urqlState"]),y=e((function(e){return e+1}),0),S=y[0],w=y[1],x=v&&v.urqlState||q,O=n((function(){if(P&&!S)return P;f&&"undefined"!=typeof window?S||f.restoreData(x):f=u({initialState:x,isClient:!0});var e=o(f);return e.exchanges||(e.exchanges=[a,l,f,s]),h(e,m)}),[P,x,S]),I=t((function(){d(),f=u({initialState:void 0}),w()}),[]);return r(p,{value:O},r(g,c({},C,{pageProps:v,urqlClient:O,resetUrqlClient:I})))};return P.displayName="withUrqlClient("+(g.displayName||g.name||"Component")+")",(g.getInitialProps||v.ssr)&&(P.getInitialProps=function(e){try{function n(){function e(){return c({},q,{urqlState:d?d.extractData():void 0,urqlClient:P})}if("undefined"!=typeof window)return c({},q,{urqlClient:P});var n=c({},q,{urqlClient:P}),o=p?n:{pageProps:n};const u=function(){if(!v.neverSuspend)return Promise.resolve(i(r(t,o))).then((function(){}))}();return u&&u.then?u.then(e):e()}var t=e.AppTree,p=!!e.Component,f=p?e.ctx:e,d=u({initialState:void 0}),m=o(d,f);m.exchanges||(m.exchanges=[a,l,d,s]);var P=h(m,!v.neverSuspend);P&&(f.urqlClient=P);var q={};const C=function(){if(g.getInitialProps)return Promise.resolve(g.getInitialProps(e)).then((function(e){q=e}))}();return Promise.resolve(C&&C.then?C.then(n):n())}catch(e){return Promise.reject(e)}}),P}}export{h as initUrqlClient,g as withUrqlClient};
//# sourceMappingURL=next-urql.min.es.js.map
